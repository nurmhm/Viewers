import React, { ReactNode } from 'react';
import classNames from 'classnames';
import {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  Icons,
  Button,
  ToolButton,
} from '../';
import { IconPresentationProvider } from '@ohif/ui-next';

import NavBar from '../NavBar';

// Todo: we should move this component to composition and remove props base

interface HeaderProps {
  children?: ReactNode;
  menuOptions: Array<{
    title: string;
    icon?: string;
    onClick: () => void;
  }>;
  isReturnEnabled?: boolean;
  onClickReturnButton?: () => void;
  isSticky?: boolean;
  WhiteLabeling?: {
    createLogoComponentFn?: (React: any, props: any) => ReactNode;
  };
  PatientInfo?: ReactNode;
  Secondary?: ReactNode;
  UndoRedo?: ReactNode;
}

function Header({
  children,
  menuOptions,
  isReturnEnabled = true,
  onClickReturnButton,
  isSticky = false,
  WhiteLabeling,
  PatientInfo,
  UndoRedo,
  Secondary,
  ...props
}: HeaderProps): ReactNode {
  const onClickReturn = () => {
    if (isReturnEnabled && onClickReturnButton) {
      onClickReturnButton();
    }
  };

  return (
    <IconPresentationProvider
      size="large"
      IconContainer={ToolButton}
    >
      <NavBar
        isSticky={isSticky}
        {...props}
      >
        <div className=" flex justify-between  pb-2 pt-2  items-center">
          <div className=" flex  items-center">
            <div
              className={classNames(
                'mr-3 inline-flex items-center'

              )}
              // onClick={onClickReturn}
              data-cy="return-to-work-list"
            >
             {/* {isReturnEnabled && <Icons.ArrowLeft className="text-primary ml-1 h-7 w-7" />} */}
              <div className="ml-1">
               <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50px" overflow="visible" viewBox="0 0 394.27 398.44"><switch><g><path fill="#F8D518" d="M368.26 252.25c-22.43 73.99-90.55 127.8-171.13 127.8-79.67 0-147.18-52.62-170.37-125.36h8.72c22.85 68.06 86.6 117.02 161.65 117.02 75.94 0 140.32-50.13 162.44-119.46h8.69z"/><path fill="#F8D518" d="M9.09 199.22c0 48.47 17.94 92.7 47.51 126.26l-6.58 6.35A199.65 199.65 0 0 1 0 199.22c0-51.54 19.36-98.51 51.15-133.88l6.53 6.4a190.37 190.37 0 0 0-48.6 127.48zM394.27 199.22c0 110.03-88.25 199.22-197.14 199.22a195.17 195.17 0 0 1-131.67-50.96l6.6-6.37c33.24 29.94 77.05 48.13 125.07 48.13 103.86 0 188.04-85.07 188.04-190.03C385.17 94.28 301 9.2 197.13 9.2A186.12 186.12 0 0 0 73.29 56.24l-6.57-6.42C101.48 18.8 147.12 0 197.13 0c108.88 0 197.14 89.2 197.14 199.22z"/><path fill="#F8D518" d="M367.37 143.34h-8.72c-22.97-67.83-86.6-116.6-161.52-116.6-73.92 0-136.88 47.5-160.59 113.95h-8.77c24.07-71.15 90.8-122.3 169.36-122.3 79.54 0 146.94 52.42 170.24 124.95z"/><path fill="#F8D518" d="M360.3 199.22c0 9.72-.83 19.23-2.43 28.5h-7.66a158.9 158.9 0 0 0 2.56-28.5c0-39.44-14.34-75.46-38.07-103.06l5.47-5.25a165.2 165.2 0 0 1 40.13 108.3zM304.71 75.25l-5.48 5.26a154.08 154.08 0 0 0-102.1-38.57c-85.95 0-155.63 70.41-155.63 157.27a159 159 0 0 0 2.56 28.51H36.4a167.5 167.5 0 0 1-2.43-28.5c0-91.07 73.04-164.9 163.16-164.9a161.5 161.5 0 0 1 107.58 40.93z"/><path fill="#4FA1CA" d="M344.38 199.22c0 9.75-.93 19.27-2.7 28.5H307.5a116.1 116.1 0 0 0 3.52-28.5c0-63.55-51-115.09-113.9-115.09-62.89 0-113.87 51.54-113.87 115.09 0 9.83 1.22 19.39 3.52 28.5H52.6a151.18 151.18 0 0 1-2.7-28.5c0-82.18 65.91-148.8 147.24-148.8 81.33 0 147.25 66.62 147.25 148.8z"/><path fill="#4FA1CA" d="M307.53 199.22c0 9.85-1.26 19.4-3.65 28.5h-4.06a108.92 108.92 0 0 0 3.77-28.5c0-59.42-47.67-107.58-106.46-107.58-58.8 0-106.45 48.16-106.45 107.58 0 9.86 1.32 19.42 3.78 28.5h-4.08a112 112 0 0 1-3.65-28.5c0-61.6 49.43-111.57 110.4-111.57 60.97 0 110.4 49.96 110.4 111.56z"/><path fill="#4FA1CA" d="M300.55 199.22c0 9.88-1.36 19.43-3.9 28.5h-3.84a101.87 101.87 0 0 0 4.04-28.5c0-55.66-44.64-100.78-99.72-100.78-55.07 0-99.73 45.12-99.73 100.78 0 9.89 1.42 19.46 4.05 28.5H97.6a105.74 105.74 0 0 1-3.9-28.5c0-57.72 46.32-104.52 103.43-104.52 57.12 0 103.42 46.8 103.42 104.52z"/><path fill="#4FA1CA" d="M292.67 199.22c0 9.92-1.49 19.49-4.24 28.5h-3.58a93.96 93.96 0 0 0 4.4-28.5c0-51.41-41.24-93.1-92.12-93.1s-92.12 41.69-92.12 93.1c0 9.93 1.54 19.52 4.4 28.5h-3.58a97.7 97.7 0 0 1-4.24-28.5c0-53.31 42.78-96.55 95.54-96.55 52.76 0 95.54 43.24 95.54 96.55z"/><path fill="#4FA1CA" d="M197.13 109.72c-48.91 0-88.56 40.08-88.56 89.5s39.65 89.5 88.56 89.5c48.91 0 88.56-40.08 88.56-89.5s-39.65-89.5-88.56-89.5zm0 167.04c-42.38 0-76.73-34.7-76.73-77.54 0-42.83 34.35-77.54 76.73-77.54 42.37 0 76.74 34.71 76.74 77.54 0 42.83-34.37 77.54-76.74 77.54z"/><path fill="#4FA1CA" d="M252.03 199.22c0 30.65-24.58 55.47-54.9 55.47s-54.89-24.82-54.89-55.47c0-30.64 24.57-55.47 54.9-55.47 30.3 0 54.89 24.83 54.89 55.47z"/><g fill="#4FA1CA"><path d="m72.04 289.02-4.87-7.65c1.58-3 3.16-6.01 4.73-9.04 2.48-4.52 4.3-7.17 5.5-7.95 2.06-1.34 3.75-1.71 5.06-1.11.85.35 1.75 1.29 2.73 2.82l.2.33a6.64 6.64 0 0 0 1.66 1.98c.67.43 1.44.36 2.31-.2l3.08-2c1.37-.9 1.63-2 .78-3.34l-4.08-6.4-26.76 17.38-4.13-6.47 34.14-22.19 9.63 15.14c1.24 1.95 1.61 3.87 1.1 5.75-.5 1.89-1.84 3.54-4.03 4.96l-6.86 4.46c-2.13 1.38-4.18 1.9-6.14 1.57a6.74 6.74 0 0 1-4.68-3.23c-.2-.3-.37-.62-.54-.95l-8.83 16.14zM105.66 323.04l-5.93-5.41 4.12-8.18-8-7.3-7.67 4.94-5.93-5.41 31.1-20.04c3.13-2.01 5.81-2 8.05.05 2.2 2 2.46 4.7.8 8.08l-16.55 33.27zm2.04-21.32 6.11-12.28-10.76 8.03 4.65 4.25zM148.5 335.4c-1.48 3.94-3.62 6.03-6.42 6.28-1.55.13-4.29-.58-8.2-2.13l-12.6-4.97 14.44-38.33 16.92 6.51c4.75 1.83 6.07 5.56 3.95 11.18l-8.09 21.46zm-5.95-5.84 6.3-16.73c.45-1.2-.17-2.11-1.86-2.76l-7.26-2.8-8.2 21.78 7.3 2.8c1.05.41 1.84.4 2.4-.04.43-.3.87-1.06 1.32-2.25zM167.8 348.44l-7.5-1.39 7.34-40.34 7.5 1.4-7.33 40.33zM207.69 342.06c-.06 5.91-2.74 8.84-8.05 8.79l-8.95-.09c-5.32-.05-7.95-3.03-7.9-8.93l.22-23.3c.05-5.9 2.75-8.83 8.08-8.78l8.99.08c5.26.05 7.88 3.03 7.82 8.93l-.21 23.3zm-7.6-2.6.16-17.94c0-1.1-.17-1.85-.55-2.27-.37-.42-1.02-.63-1.94-.64l-4.7-.04c-.96-.01-1.6.19-1.94.6-.33.41-.5 1.16-.51 2.25l-.16 17.66c-.05 1.05.12 1.79.49 2.2.37.42 1.03.64 1.98.64l4.65.05c1.66.01 2.5-.82 2.52-2.52zM245.05 334.36l2.14 8.6-13.67 3.55c-2.96.78-5.32.57-7.1-.62-1.77-1.19-3.09-3.48-3.96-6.87l-7.65-30 7.39-1.91 7.03 27.59c.43 1.67.81 2.62 1.14 2.85.42.32 1.4.27 2.96-.13l11.72-3.06zM273.44 310.23l-9.9 13.6.24.42c.71 1.23 1.45 1.61 2.23 1.15l12.09-7.14 3.91 6.77-12.81 7.57c-4.17 2.46-7.58 1.4-10.23-3.17l-7.8-13.5c-1.14-1.94-1.49-3.77-1.07-5.47a6.42 6.42 0 0 1 3.18-4.07l7.9-4.67c1.75-1.03 3.43-1.26 5.03-.69 1.61.58 3 1.87 4.16 3.89l3.07 5.3zm-7.84.12-.09-.15c-.19-.32-.5-.5-.94-.55-.45-.04-.82.03-1.14.21l-4.11 2.44a2.3 2.3 0 0 0-1 1.2c-.2.54-.15 1.06.16 1.58l1.57 2.73 5.55-7.46zM311.04 298.85l-4.8 4.79-14.44-14.77c-1-1.02-2.02-1-3.06.05l-2.98 2.97c-1.02 1.03-1.04 2.05-.05 3.06l14.45 14.77-4.8 4.78-16.28-16.65c-3.4-3.47-3.6-6.71-.6-9.72l6.65-6.64c3.01-3 6.21-2.77 9.62.7l16.3 16.66zM313.47 256.93l-6.51 9.6c-.74 1.08-.53 2.04.63 2.84.77.53 1.83-.17 3.2-2.13 1.9-2.66 3.35-4.32 4.35-5 2.1-1.39 4.4-1.18 6.87.61 3.43 2.46 5.55 4.23 6.39 5.33 1.75 2.26 1.8 4.6.14 7.04l-7.85 11.56-6.4-4.44 6.63-9.75c.63-.93.35-1.81-.84-2.64-.74-.5-1.8.16-3.2 2-1.91 2.58-3.34 4.18-4.27 4.82-2.03 1.4-4.23 1.29-6.59-.35l-4.68-3.25c-1.78-1.23-2.82-2.7-3.13-4.4-.3-1.69.08-3.34 1.18-4.95l7.66-11.29 6.42 4.4z"/></g></g></switch></svg>
              </div>
            </div>
          </div>
          {/* <div className="absolute top-1/2 left-[250px] h-8 -translate-y-1/2">{Secondary}</div> */}
          <div className=" flex items-center">
            <div className="flex items-center space-x-2">{children}</div>
          </div>
          <div className=" flex  select-none items-center">

            <div className="flex-shrink-0">
              <div className="flex items-center gap-2">
                {menuOptions.map((option, index) => {
                  const IconComponent = option.icon
                    ? Icons[option.icon as keyof typeof Icons]
                    : null;
                  return (
                    <button
                      key={index}
                      onClick={option.onClick}
                      className=" mr-2 "
                    >
                      {IconComponent && (
                        <span className="flex h-4 w-4 items-center justify-center text-white">
                          <Icons.ByName name={IconComponent.name} />
                        </span>
                      )}

                    </button>
                  );
                })}
              </div>
            </div>
          </div>
        </div>
      </NavBar>
    </IconPresentationProvider>
  );
}

export default Header;
